<html>
  <head>
       <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css" integrity="sha384-6pzBo3FDv/PJ8r2KRkGHifhEocL+1X2rVCTTkUfGk7/0pbek5mMa1upzvWbrUbOZ" crossorigin="anonymous">
  </head>

  <body>
        <h2> Hello XYZ welcome to blah </h2>
        <h3><a href=''>Click here to download the exam as pdf </a></h3>
        <p id="progress">Upload Progress: <span id="progress_value"></span> </p>


        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Problem 1</h3>
          </div>
          <div class="panel-body">
            <p> Prove that \( x^2 - y^2 = (x - y)(x + y) \). </p>
                <form id="the_form">
                  <div class="input-group">
                     <label for="ans">Answer:</label>
                     <input name="prob_id" value="1" type="hidden" />
                     <input name="upload" type="file" class="form-control" id="ans" placeholder="upload file" />
                  </div>
                  <button class="btn btn-primary" id="submit_button">Submit</button>
                </form>
          </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.0.slim.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script>

function uploadForm(uid) {
    let form = document.getElementById(uid);
    let formData = new FormData(form);
    let xhr = new XMLHttpRequest();
    xhr.open('POST', '/upload_solution', true);
    console.log('here');
    xhr.upload.addEventListener('progress', function(e) {
        var perc = (e.loaded / e.total ) * 100;
        document.getElementById('progress_value').innerHTML = perc + '%';
    });

    xhr.addEventListener('load', function(e) {
        console.log(xhr.status);
        alert('success');
    });

    xhr.send(formData);
}

$(document).ready( function() {
    console.log('doc.ready');
    $('#submit_button').click(function() {
        console.log('clicked');
        uploadForm('the_form');
        return false;
    });
});
</script>

  </body>
</html>
